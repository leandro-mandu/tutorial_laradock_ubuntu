<!doctype html>
<html lang="pt-br">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Aprenta a modelar o banco de dados através de migrations para criar uma aplicação laravel no Ubuntu!">
    <meta name="keywords" content="banco, mysql, workbench, laravel, laradock, docker, container, git, github, ubuntu">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="js/bootstrap.min.css">

    <title>Controllers e rotas - Tutorial Docker Laradock Git no Ubuntu</title>
  </head>
  <body>
	<nav class="navbar navbar-expand-lg navbar-light bg-light" id="div_nav_top">
  		<a class="navbar-brand" href="index.html">Home</a>
  		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    		<span class="navbar-toggler-icon"></span>
  		</button>

  		<div class="collapse navbar-collapse" id="navbarSupportedContent">
    		<ul class="navbar-nav mr-auto" id="ul_nav_top">
      			<li class="nav-item active">
        			<a class="nav-link" href="https://github.com/leandro-mandu">Idealizador</a>
      			</li>
    		</ul>
  		</div>
	</nav>
	<div class="container">
		<div class="row">
			<div class="col-2">
				<nav class="nav flex-column"  id="div_nav">
				</nav>
			</div><!--/col-->
			<div class="col-6">
				<h1>Controllers</h1>
				<h2>Onde tudo acontece</h2>
				<p>
          Antes de continuar falando sobre views e criando nossos formulários e tudo mais, vamos entender um pouco sobre o Controller e como o sistema define qual controller será chamado através da rota digitada no navegador.<br>
					O laravel utiliza a arquitetura MVC, isto é, Model, View e Controller. Models são responsáveis pelas iterações com o banco de dados. As Views são responsáveis por exibir estes dados na tela, e os Controllers são responsáveis por implementar e controlar o uso de ambas.<br>
					Criaremos neste projeto uma classe Controller para cada tabela que criamos. Dentro de app/http/Controllers/Auth você pode ver que já existem as controllers responsáveis pela realização da parte de autenticação do usuário. Um nível acima você vê o arquivo Controller.php que é o controller inicial da nossa aplicação. Ele controla o que acontece quando acessamos a página inicial do site. Criaremos então as controllers de Artigo e Categoria que serão chamadas quando acessarmos no browser por exemplo http://meusite.com/artigo e http://meusite.com/categoria.<br>
				<br>

					No terminal já dentro do bash do laradock execute:<br>
					<input type="text" value="php artisan make:controller CategoriaController --resource" readonly class="form-control"/><br>
					<input type="text" value="php artisan make:controller ArtigoController  --resource" readonly class="form-control"/><br>
					Isto criará dois arquivos dentro da pasta App/Http/Controllers com os nomes informados acima. A palavra-chave --resource é opcional, quando usada como no nosso projeto, ela facilita o trabalho de definição das rotas, sendo necessário definir apenas o controller principal uma vez, ao invés de definir separadamente todas as rotas do nosso crud.<br>
					<br>
					Primeiro trabalharemos com o CategoriaController.php. Dentro desta classe temos 7 funções padrão, que são:
					<textarea readonly rows=15 class="form-control">
    public function index(){}//Função padrão/listar

    public function create(){}//função para abrir a tela de cadastro

    public function store(Request $request){}//recebe os dados do cadastro e armazena no banco

    public function show($id){}//mostra um registro pelo parâmetro id

    public function edit($id){}//abre a tela de edição de um registro

    public function update(Request $request, $id){}//salva as alterações no banco de dados

    public function destroy($id){}//deleta um registro
  					</textarea><br>

            <br>
            E no arquivo de rotas (routes/web.php) criamos a rota, isto é, o link para a controller Categoria:
            <textarea readonly rows=10 class="form-control">
              Route::get('/', function () {
                  return view('index');
              });

              Auth::routes();

              Route::get('/home', 'HomeController@index')->name('home');
              Route::resource('categoria', 'CategoriaController');
            </textarea><br>

<br>
Neste arquivo é possível entender o funcionamento básico do sistema de rotas do laravel. Sem criar as Controller no modo resource seriam necessárias várias outras linhas para especificar as rotas do formulário de cadastro, da página de edição do registro e do formulário de edição, além das rotas para as funções do controller responsáveis por receber os formulários e processálos.<br>

				</p>
				<hr>
			</div><!--/col-->
		</div><!--/row-->
	</div><!--/container-->
    <!-- Optional JavaScript -->
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/menu.js"></script>
  </body>
</html>
